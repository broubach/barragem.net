<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<ui:composition template="../../protectedpages/layout/layoutPosNovoUsuario.xhtml">
	<ui:param name="notRenderBarragemCss" value="true"/>
	<ui:define name="conteudo">

		<div class="maincontent">
			<div class="tituloPerfil">
				<div class="passoAtivo">
					<h2>#{msg.label_passo2}</h2>
					#{msg.label_atualizar_foto}
				</div>
				<div class="passoInativo">
					<h4>#{msg.label_passo1}</h4>
				</div>
			</div>
			<br/>
			<br/>

	        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/fileupload/eAELXT5DOhSIAQ!sA18_fileupload.css" />
	        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/fileupload/eAELXT5DOhSIAQ!sA18_panel.css" />
	        <link rel="stylesheet" type="text/css" href="#{request.contextPath}/css/barragem.css" />

	        <script type="text/javascript" src="#{request.contextPath}/js/fileupload/3_3_0.GAorg.ajax4jsf.javascript.PrototypeScript.js"></script>
	        <script type="text/javascript" src="#{request.contextPath}/js/3_3_0.GAorg.ajax4jsf.javascript.AjaxScript.js"></script>
	        <script type="text/javascript" src="#{request.contextPath}/js/fileupload/utils.js"></script>
	        <script type="text/javascript" src="#{request.contextPath}/js/fileupload/json-dom.js"></script>
	        <script type="text/javascript" src="#{request.contextPath}/js/fileupload/FileUpload.js"></script>
	        <script type="text/javascript" src="#{request.contextPath}/js/fileupload/progressBar.js"></script>
	        <script type="text/javascript" src="#{request.contextPath}/js/fileupload/form.js"></script>

		    <h:form>
				<div class="dados">
			        <h:panelGroup styleClass="fileupload-image-container" layout="block">
			            <rich:fileUpload fileUploadListener="#{fileUploadBean.listener}" listHeight="0" listWidth="0"
			                id="upload" immediateUpload="true"
			                acceptedTypes="jpg, gif, png, bmp" allowFlash="false" cleanButtonClass="hidden" addControlLabel="#{msg.label_upload_addControlLabel}" 
			                cancelEntryControlLabel="#{msg.label_upload_cancelEntryControlLabel}" clearAllControlLabel="#{msg.label_upload_clearAllControlLabel}"
							clearControlLabel="#{msg.label_upload_clearControlLabel}" doneLabel="#{msg.label_upload_doneLabel}"
							progressLabel="#{msg.label_upload_progressLabel}" sizeErrorLabel="#{msg.label_upload_sizeErrorLabel}"
							stopControlLabel="#{msg.label_upload_stopControlLabel}" stopEntryControlLabel="#{msg.label_upload_stopEntryControlLabel}"
							transferErrorLabel="#{msg.label_upload_transferErrorLabel}" uploadControlLabel="#{msg.label_upload_uploadControlLabel}">
			                <a4j:support event="onuploadcomplete" reRender="info, upload" />
			            </rich:fileUpload>
						<rich:panel styleClass="float-right">
							<a4j:mediaOutput id="info" element="img" mimeType="image/jpeg" 
							    createContent="#{fileUploadBean.paint}" styleClass="foto-perfil"
							    cacheable="false">
							    <f:param value="#{fileUploadBean.timeStamp}" name="time"/>  
							</a4j:mediaOutput>
						</rich:panel>
			        </h:panelGroup>
					<br/>

					<div class="salvarPasso3">
						<h:commandButton action="fim" value="#{msg.label_salvar_e_continuar}" styleClass="submit"/>
						<h:commandButton action="fim" value="#{msg.label_pular_esse_passo}" styleClass="submit"/>
						<h:commandButton action="passo2" value="#{msg.label_voltar}" styleClass="submit"/>
					</div>
				</div>
			</h:form>
		</div>
	</ui:define>
</ui:composition>

</html>