<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<ui:composition template="/protectedpages/layout/layoutPrincipal.xhtml">
	<ui:define name="conteudo">
		<div class="maincontent">
			<h:form id="exibirEstatisticas">
				<h2>#{exibirEstatisticasBean.usuarioEmFoco.nomeCompletoCapital}</h2>
				<h:panelGroup id="menu-contextual" styleClass="menu-contextual" layout="block">
			        <ul>
			        	<c:if test="#{not exibirPerfilBean.usuarioJahAdicionado}">
				            <li>
								<h:commandLink value="#{msg.label_adicionar_a_minha_lista_de_jogadores}" actionListener="#{exibirPerfilBean.adicionaUsuario}" styleClass="btn_adicionar_bckgnd"/>
				            </li>
			            </c:if>
			            <li>
							<h:commandLink value="#{msg.label_perfil}" actionListener="#{exibirPerfilBean.exibePerfil}" action="exibirPerfil" styleClass="btn_perfil_bckgnd"><f:param name="id" value="#{exibirEstatisticasBean.usuarioEmFoco.id}"/></h:commandLink>
			            </li>
			        	<c:if test="#{exibirEstatisticasBean.usuarioJahAdicionado}">
				            <li>
								<h:commandLink value="#{msg.label_mensagens}" actionListener="#{exibirMensagensBean.exibeMensagens}" action="exibirMensagens" styleClass="btn_mensagens_bckgnd"><f:param name="id" value="#{exibirEstatisticasBean.usuarioEmFoco.id}"/></h:commandLink>
				            </li>
			            </c:if>
			            <c:if test="false">
				            <li>
								<h:commandLink value="#{msg.label_estatisticas}" disabled="true" styleClass="btn_estatisticas_bckgnd"></h:commandLink>
				            </li>
			            </c:if>
			        </ul>
				</h:panelGroup>

			    <ui:include src="../componentes/mensagem-erro.xhtml"/>
			    <ui:include src="../componentes/mensagem-sucesso.xhtml"/>
	            <div class="clear"></div>
	            <br/>

	            <img class="float-right grafico" src="#{request.contextPath}/protectedpages/exibirestatisticas/exibirEstatisticas.do?vitorias=#{exibirEstatisticasBean.vitorias}&#38;derrotas=#{exibirEstatisticasBean.derrotas}" border="0"/>
	            
				<table class="exibirPainelBarragemRankingTable">
				<thead>
					<tr>
						<th class="exibirPainelBarragemRankingTableHead">#{msg.label_data}</th>
						<th class="exibirPainelBarragemRankingTableHead">#{msg.label_tipo}</th>
						<th class="exibirPainelBarragemRankingTableHead">#{msg.label_participantes}</th>
						<th class="exibirPainelBarragemRankingTableHead">#{msg.label_placar}</th>
						<th class="exibirPainelBarragemRankingTableHead">#{msg.label_resultado}</th>
						<th class="exibirPainelBarragemRankingTableHead">#{msg.label_participantes_canhotos}</th>
					</tr>
					<tr>
						<th class="exibirPainelBarragemRankingTableHead">
							<h:selectOneMenu value="#{exibirEstatisticasBean.filtroData}" onchange="submit()" valueChangeListener="#{exibirEstatisticasBean.filtra}">
								<f:selectItem itemLabel="" itemValue=""/>
								<f:selectItems value="#{exibirEstatisticasBean.listaDatas}"/>
							</h:selectOneMenu>
						</th>
						<th class="exibirPainelBarragemRankingTableHead">
							<h:selectOneMenu value="#{exibirEstatisticasBean.filtroTipo}" onchange="submit()" valueChangeListener="#{exibirEstatisticasBean.filtra}">
								<f:selectItem itemLabel="" itemValue=""/>
								<f:selectItem itemLabel="#{msg.label_jogo_avulso}" itemValue="ja"/>
								<f:selectItem itemLabel="#{msg.label_jogo_barragem}" itemValue="jb"/>
								<f:selectItem itemLabel="#{msg.label_treino}" itemValue="t"/>
							</h:selectOneMenu>
						</th>
						<th class="exibirPainelBarragemRankingTableHead">
							<h:selectOneMenu value="#{exibirEstatisticasBean.filtroParticipantes}" converter="JogadorConverter" styleClass="participantes" onchange="submit()" valueChangeListener="#{exibirEstatisticasBean.filtra}">
								<f:selectItem itemLabel="" itemValue=""/>
								<f:selectItems value="#{exibirEstatisticasBean.listaParticipantes}"/>
							</h:selectOneMenu>
						</th>
						<th class="exibirPainelBarragemRankingTableHead">
							<h:selectOneMenu value="#{exibirEstatisticasBean.filtroPlacar}" onchange="submit()" valueChangeListener="#{exibirEstatisticasBean.filtra}">
								<f:selectItem itemLabel="" itemValue=""/>
								<f:selectItems value="#{exibirEstatisticasBean.listaPlacares}"/>
							</h:selectOneMenu>
						</th>
						<th class="exibirPainelBarragemRankingTableHead">
							<h:selectOneMenu value="#{exibirEstatisticasBean.filtroVitoria}" onchange="submit()" valueChangeListener="#{exibirEstatisticasBean.filtra}">
								<f:selectItem itemLabel="" itemValue=""/>
								<f:selectItem itemLabel="#{msg.label_vitoria}" itemValue="v"/>
								<f:selectItem itemLabel="#{msg.label_derrota}" itemValue="d"/>
								<f:selectItem itemLabel="#{msg.label_indefinido}" itemValue="i"/>
							</h:selectOneMenu>
						</th>
						<th class="exibirPainelBarragemRankingTableHead">
							<h:selectOneMenu value="#{exibirEstatisticasBean.filtroCanhotos}" onchange="submit()" valueChangeListener="#{exibirEstatisticasBean.filtra}">
								<f:selectItem itemLabel="" itemValue=""/>
								<f:selectItem itemLabel="#{msg.label_sim}" itemValue="true"/>
								<f:selectItem itemLabel="#{msg.label_nao}" itemValue="false"/>
							</h:selectOneMenu>
						</th>
					</tr>
				</thead>
				<tbody>
				<c:forEach items="#{exibirEstatisticasBean.paginacaoEventos.pagina}" var="item" varStatus="status">
					<tr class="#{status.index % 2 ==0 ? 'exibirPainelBarragemRankingBodyBackground' : 'exibirPainelBarragemRankingBodyBackgroundAlt'}">
						<td class="exibirPainelBarragemRankingBody">
							<h:outputText value="#{item.data}" >
								<f:convertDateTime pattern="dd MMM" timeZone="GMT-3" locale="pt"/>
							</h:outputText>&#160;
							<h:outputText value="#{item.hora}" >
								<f:convertDateTime pattern="HH:mm" timeZone="GMT-3" locale="pt"/>
							</h:outputText>
						</td>
						<td class="exibirPainelBarragemRankingBody">
							<h:outputText value="#{item.tipoStr}" />
						</td>
						<td class="exibirPainelBarragemRankingBody">
							<h:outputText value="#{item.jogadoresStr}" />
						</td>
						<td class="exibirPainelBarragemRankingBody">
							<h:outputText value="#{item.placar}" />
						</td>
						<td class="exibirPainelBarragemRankingBody">
							<h:outputText value="#{item.resultadoStr}" />
						</td>
						<td class="exibirPainelBarragemRankingBody">
							<h:outputText value="#{item.participantesCanhotos}" />
						</td>
					</tr>
				</c:forEach>
				</tbody>
				</table>

			    <ui:include src="../componentes/paginacao.xhtml">
			    	<ui:param name="paginavel" value="#{exibirEstatisticasBean.paginacaoEventos}"/>
			    </ui:include>
			</h:form>
		</div>
	</ui:define>

</ui:composition>
</html>