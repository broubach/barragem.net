<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<script type="text/javascript" src="#{request.contextPath}/js/fileupload/3_3_0.GAorg.ajax4jsf.javascript.PrototypeScript.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/js/3_3_0.GAorg.ajax4jsf.javascript.AjaxScript.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/js/fileupload/utils.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/js/fileupload/json-dom.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/js/fileupload/FileUpload.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/js/fileupload/progressBar.js"></script>
	<script type="text/javascript" src="#{request.contextPath}/js/fileupload/form.js"></script>

	<div class="dados">
		<h:panelGroup id="mensagemErro" layout="block" styleClass="mensagem-erro-hidden">
	  		<span>#{msg.label_upload_sizeErrorLabel}</span>
		</h:panelGroup>

		<h:panelGroup styleClass="perfilFotoContainer" layout="block">
			<div>
				<rich:panel>
					<a4j:mediaOutput id="info" element="img" styleClass="foto-perfil"
					    createContent="#{editarPerfilBean.paintFotoUpload}"
					    cacheable="false">
					    <f:param value="#{editarPerfilBean.timeStamp}" name="time"/>  
					</a4j:mediaOutput>
				</rich:panel>
				<div class="perfilBtnUploadFotoContainer">
					<rich:fileUpload fileUploadListener="#{editarPerfilBean.atualizaFotoUpload}" listHeight="0" listWidth="0"
					    id="upload" immediateUpload="true"
					    acceptedTypes="jpg, gif, png, bmp" allowFlash="false" cleanButtonClass="hidden" addControlLabel="#{msg.label_upload_addControlLabel}" 
					    cancelEntryControlLabel="#{msg.label_upload_cancelEntryControlLabel}" clearAllControlLabel="#{msg.label_upload_clearAllControlLabel}"
						clearControlLabel="#{msg.label_upload_clearControlLabel}" doneLabel="#{msg.label_upload_doneLabel}"
						progressLabel="#{msg.label_upload_progressLabel}" sizeErrorLabel="#{msg.label_upload_sizeErrorLabel}"
						stopControlLabel="#{msg.label_upload_stopControlLabel}" stopEntryControlLabel="#{msg.label_upload_stopEntryControlLabel}"
						transferErrorLabel="#{msg.label_upload_transferErrorLabel}" uploadControlLabel="#{msg.label_upload_uploadControlLabel}" onsizerejected="$j('#perfil\\:mensagemErro').show();">
						<a4j:support event="onuploadcomplete" reRender="upload, info" />
						<a4j:support event="onupload" onsubmit="$j('#perfil\\:mensagemErro').hide();" />
					</rich:fileUpload>
				</div>
			</div>
		</h:panelGroup>
	</div>
</html>